<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>Node -文件读写模块--- fs | 快乐虫の地带</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="fs - 文件读写">
<meta name="keywords" content="fs">
<meta property="og:type" content="article">
<meta property="og:title" content="Node -文件读写模块--- fs">
<meta property="og:url" content="http://happychong.github.io/2019/11/01/Node中文件的读写模块---FS/index.html">
<meta property="og:site_name" content="快乐虫の地带">
<meta property="og:description" content="fs - 文件读写">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="http://happychong.github.io/images/writeSteam.png">
<meta property="og:updated_time" content="2020-03-17T06:55:14.446Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Node -文件读写模块--- fs">
<meta name="twitter:description" content="fs - 文件读写">
<meta name="twitter:image" content="http://happychong.github.io/images/writeSteam.png">
  
    <link rel="alternate" href="/atom.xml" title="快乐虫の地带" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">快乐虫の地带</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="搜索"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://happychong.github.io"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="default-Node中文件的读写模块---FS" class="article article-type-default" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2019/11/01/Node中文件的读写模块---FS/" class="article-date">
  <time datetime="2019-10-31T16:00:00.000Z" itemprop="datePublished">2019-11-01</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Node/">Node</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Node -文件读写模块--- fs
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h1 id><a href="#" class="headerlink" title></a></h1><h2 id="一：简述"><a href="#一：简述" class="headerlink" title="一：简述"></a>一：简述</h2><p>fs 模块提供了与文件系统进行交互的API，其中包括同步和异步的形式。</p>
<h3 id="1-同步方法"><a href="#1-同步方法" class="headerlink" title="1 同步方法"></a>1 同步方法</h3><ul>
<li>优点：易使用</li>
<li>适用场景：刚开始启动项目时候使用</li>
<li>错误机制：文件不存在直接抛出错误</li>
</ul>
<blockquote>
<p>同步的操作发生的异常会立即抛出，可以使用 try…catch 处理，也可以允许冒泡</p>
</blockquote>
<h3 id="2-异步方法"><a href="#2-异步方法" class="headerlink" title="2 异步方法"></a>2 异步方法</h3><ul>
<li>优点：不堵塞主线程</li>
<li>适用场景：项目运行起来后使用</li>
<li>错误机制：如果文件不存在，在回调方法中的第一个参数传入错误信息 </li>
</ul>
<blockquote>
<p>异步的形式总是将完成回调作为其最后一个参数。 传给完成回调的参数取决于具体方法，但第一个参数始终预留用于异常。 如果操作成功完成，则第一个参数将为 null 或 undefined</p>
</blockquote>
<h2 id="二：fs-的常用方法"><a href="#二：fs-的常用方法" class="headerlink" title="二：fs 的常用方法"></a>二：fs 的常用方法</h2><h3 id="1-导入"><a href="#1-导入" class="headerlink" title="1 导入"></a>1 导入</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br></pre></td></tr></table></figure>

<h3 id="2-读取-文件"><a href="#2-读取-文件" class="headerlink" title="2 读取 - 文件"></a>2 读取 - 文件</h3><p>读取文件，文件不存在的话会报错，同步、异步不同的报错形式</p>
<h4 id="语法："><a href="#语法：" class="headerlink" title="语法："></a>语法：</h4><p>同步：fs.readFileSync(path[, options])</p>
<p>异步：fs.readFile(path[, options], callback)</p>
<ul>
<li>path ： 文件名或文件描述符</li>
<li>options ：（Object | string）<ul>
<li>encoding ：（string | null） 默认值: null。</li>
<li>flag ：（string） 参阅支持的文件系统标志。默认值: ‘r’。</li>
</ul>
</li>
<li>callback ：（Function）<ul>
<li>err ：Error</li>
<li>data （string | Buffer）</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 同步</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> b = fs.readFileSync(<span class="string">'./b.js'</span>);</span><br><span class="line">    <span class="comment">// b 是 Buffer 的二进制流</span></span><br><span class="line">    <span class="built_in">console</span>.log(b.toString());</span><br><span class="line">&#125; <span class="keyword">catch</span> (err) &#123;</span><br><span class="line">    <span class="comment">// 处理错误</span></span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'文件不存在'</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 异步</span></span><br><span class="line">fs.readFile(<span class="string">'./c.js'</span>, (err, data) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'文件不存在'</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data.toString());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h3 id="3-写入-文件"><a href="#3-写入-文件" class="headerlink" title="3 写入 - 文件"></a>3 写入 - 文件</h3><p>写入文件，文件不存在会创建文件，不报错</p>
<h4 id="语法"><a href="#语法" class="headerlink" title="语法"></a>语法</h4><p>同步：fs.writeFileSync(file, data[, options])</p>
<p>异步：fs.writeFile(file, data[, options], callback)</p>
<p>这2个方法，每次都会重新写入内容，如果想在原有文件追加内容，options的flag可以设置为’a’，也有appendFileSync方法可以用</p>
<ul>
<li>file ：文件名或文件描述符</li>
<li>data ：写入的内容</li>
<li>options ：（Object | string）<ul>
<li>encoding ：（string | null） 默认值: null</li>
<li>mode ：默认值: 0o666</li>
<li>flag ：（string） 文件系统标志。默认值: ‘w’</li>
</ul>
</li>
<li>callback ：（Function）<ul>
<li>err ：Error</li>
</ul>
</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 同步</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line">fs.writeFile(<span class="string">'文件.txt'</span>, data, (err) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'文件已被保存'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">fs.writeFile(<span class="string">'文件.txt'</span>, <span class="string">'Node.js中文网'</span>, <span class="string">'utf8'</span>, callback);</span><br></pre></td></tr></table></figure>

<h2 id="三：拷贝文件-copy-amp-扩展-fs-open-fs-read-fs-write-fs-close"><a href="#三：拷贝文件-copy-amp-扩展-fs-open-fs-read-fs-write-fs-close" class="headerlink" title="三：拷贝文件 - copy &amp; 扩展 (fs.open  fs.read  fs.write  fs.close)"></a>三：拷贝文件 - copy &amp; 扩展 (fs.open  fs.read  fs.write  fs.close)</h2><p>将 src 拷贝到 dest。 默认情况下，如果 dest 已经存在，则覆盖它。 除了可能的异常，回调函数没有其他参数。 Node.js 不保证拷贝操作的原子性。 如果在打开目标文件用于写入后发生错误，则 Node.js 将尝试删除目标文件。</p>
<p>异步：fs.copyFile(src, dest[, flags], callback)</p>
<p>同步：fs.copyFileSync(src, dest[, flags])</p>
<ul>
<li>src (string | Buffer | URL) 要拷贝的源文件名。</li>
<li>dest (string | Buffer | URL) 拷贝操作的目标文件名。</li>
<li>flags (number) 用于拷贝操作的修饰符。默认值: 0。是一个可选的整数，指定拷贝操作的行为。 可以创建由两个或更多个值按位或组成的掩码（比如 fs.constants.COPYFILE_EXCL | fs.constants.COPYFILE_FICLONE）。<ul>
<li>fs.constants.COPYFILE_EXCL - 如果 dest 已存在，则拷贝操作将失败。</li>
<li>fs.constants.COPYFILE_FICLONE - 拷贝操作将尝试创建写时拷贝（copy-on-write）链接。如果平台不支持写时拷贝，则使用后备的拷贝机制。</li>
<li>fs.constants.COPYFILE_FICLONE_FORCE - 拷贝操作将尝试创建写时拷贝链接。如果平台不支持写时拷贝，则拷贝操作将失败。</li>
</ul>
</li>
<li>callback (Function)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">const</span> &#123; COPYFILE_EXCL &#125; = fs.constants;</span><br><span class="line"><span class="comment">// 异步</span></span><br><span class="line"><span class="comment">// 默认情况下将创建或覆盖目标文件。</span></span><br><span class="line">fs.copyFile(<span class="string">'源文件.txt'</span>, <span class="string">'目标文件.txt'</span>, (err) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'源文件已拷贝到目标文件'</span>);</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 通过使用 COPYFILE_EXCL，如果目标文件存在，则操作将失败。</span></span><br><span class="line">fs.copyFile(<span class="string">'源文件.txt'</span>, <span class="string">'目标文件.txt'</span>, COPYFILE_EXCL, callback);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 同步</span></span><br><span class="line"><span class="comment">// 默认情况下将创建或覆盖目标文件。</span></span><br><span class="line">fs.copyFileSync(<span class="string">'源文件.txt'</span>, <span class="string">'目标文件.txt'</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'源文件已拷贝到目标文件'</span>);</span><br><span class="line"><span class="comment">// 通过使用 COPYFILE_EXCL，如果目标文件存在，则操作将失败。</span></span><br><span class="line">fs.copyFileSync(<span class="string">'源文件.txt'</span>, <span class="string">'目标文件.txt'</span>, COPYFILE_EXCL);</span><br></pre></td></tr></table></figure>

<p>copyFile有可能会导致内存淹没，实现原理同下面代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 此方式不适合大文件的拷贝，否则会引发内存浪费</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line">fs.readFile(<span class="string">'./source.js'</span>, (err, data) =&gt; &#123;</span><br><span class="line">    <span class="keyword">if</span> (err) &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(<span class="string">'文件不存在'</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="built_in">console</span>.log(data.toString());</span><br><span class="line">        fs.writeFile(<span class="string">'./copy.js'</span>, data, <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            <span class="keyword">if</span> (err) <span class="keyword">throw</span> err</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 这里实现的文件拷贝的功能，有性能上的问题，假如被拷贝的source.js文件非常大，有1G，那这种实现方式，需要把整个1G内容全部读取到计算机内存中，再把内存中的数据写入到copy.js中，浪费了大量的计算机的内存</span></span><br></pre></td></tr></table></figure>

<p>一般项目中，64K以下的文件拷贝，应用上面的实现方式，64K以上的文件拷贝，应用下面的实现方式</p>
<p>相关API：</p>
<ul>
<li>fs.open(path[, flags[, mode]], callback)</li>
<li>fs.read(fd, buffer, offset, length, position, callback)</li>
<li>fs.write(fd, buffer[, offset[, length[, position]]], callback)</li>
<li>fs.close(fd, callback)</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 读一点，写一点的拷贝方式 - 手动按字节来读取</span></span><br><span class="line"><span class="comment">// fs.open  fs.read  fs.write  fs.close</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> buffer = Buffer.alloc(<span class="number">3</span>);</span><br><span class="line">fs.open(<span class="string">'./a.txt'</span>, <span class="string">'r'</span>, (err, rfd) =&gt; &#123;</span><br><span class="line">    <span class="comment">// rfd (number): file descriptor 文件描述符</span></span><br><span class="line">    fs.open(<span class="string">'./new.txt'</span>, <span class="string">'w'</span>, (err, wfd) =&gt; &#123;</span><br><span class="line">        <span class="keyword">let</span> index = <span class="number">0</span>;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">readFile</span>(<span class="params">index, wirteLength=<span class="number">3</span></span>) </span>&#123;</span><br><span class="line">            fs.read(rfd, buffer, <span class="number">0</span>, <span class="number">3</span>, index, <span class="function"><span class="keyword">function</span> (<span class="params">err, tytesRead, buffer</span>) </span>&#123;</span><br><span class="line">                <span class="comment">// tytesRead 真正读取到的位置</span></span><br><span class="line">                <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> err;</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    fs.write(wfd, buffer, <span class="number">0</span>, tytesRead, (err, written, buffer) =&gt; &#123;</span><br><span class="line">                        index += tytesRead;</span><br><span class="line">                        <span class="keyword">if</span> (tytesRead === <span class="number">3</span>) &#123;</span><br><span class="line">                            <span class="comment">// 读取到了3个，递归读取and写入</span></span><br><span class="line">                            readFile(index);</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            fs.close(wfd, () =&gt; &#123;</span><br><span class="line">                                <span class="built_in">console</span>.log(<span class="string">'wfd关闭'</span>);</span><br><span class="line">                            &#125;);</span><br><span class="line">                            fs.close(rfd, () =&gt; &#123;</span><br><span class="line">                                <span class="built_in">console</span>.log(<span class="string">'rfd关闭'</span>);</span><br><span class="line">                            &#125;);</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">        readFile(index);</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="四：改名-rename"><a href="#四：改名-rename" class="headerlink" title="四：改名 - rename"></a>四：改名 - rename</h2><p>将 oldPath 上的文件重命名为 newPath 提供的路径名。 如果 newPath 已存在，则覆盖它。</p>
<p>异步：fs.rename(oldPath, newPath, callback)</p>
<p>同步：fs.renameSync(oldPath, newPath)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fs.rename(<span class="string">'旧文件.txt'</span>, <span class="string">'新文件.txt'</span>, (err) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'重命名完成'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="五：删除文件-unlink"><a href="#五：删除文件-unlink" class="headerlink" title="五：删除文件 - unlink"></a>五：删除文件 - unlink</h2><p>异步：fs.unlink(path, callback)</p>
<p>同步：fs.unlinkSync(path)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 假设 'path/file.txt' 是常规文件。</span></span><br><span class="line">fs.unlink(<span class="string">'path/file.txt'</span>, (err) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'文件已删除'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="六：判断文件或目录是否存在"><a href="#六：判断文件或目录是否存在" class="headerlink" title="六：判断文件或目录是否存在"></a>六：判断文件或目录是否存在</h2><p>同步：fs.existsSync(path)</p>
<p>异步：fs.access(path[, mode], callback)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">const</span> fsPromises = fs.promises;</span><br><span class="line"><span class="comment">// 同步</span></span><br><span class="line"><span class="keyword">if</span> (fs.existsSync(<span class="string">'/etc/passwd'</span>)) &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'文件已存在'</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 异步</span></span><br><span class="line">fs.access(path, fs.constants.F_OK, (err) =&gt; &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">`<span class="subst">$&#123;file&#125;</span> <span class="subst">$&#123;err ? <span class="string">'不存在'</span> : <span class="string">'存在'</span>&#125;</span>`</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="七：创建目录"><a href="#七：创建目录" class="headerlink" title="七：创建目录"></a>七：创建目录</h2><p>异步：fs.mkdir(path[, options], callback)</p>
<p>同步：fs.mkdirSync(path[, options])</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 可选的 options 参数可以是指定模式（权限和粘滞位）的整数，也可以是具有 mode 属性和 recursive 属性（指示是否应创建父文件夹）的对象。</span></span><br><span class="line"><span class="comment">// 创建 /tmp/a/apple 目录，无论是否存在 /tmp 和 /tmp/a 目录。</span></span><br><span class="line">fs.mkdir(<span class="string">'/tmp/a/apple'</span>, &#123; <span class="attr">recursive</span>: <span class="literal">true</span> &#125;, (err) =&gt; &#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 在 Windows 上，在根目录上使用 fs.mkdir() （即使使用递归参数）也会导致错误：</span></span><br><span class="line">fs.mkdir(<span class="string">'/'</span>, &#123; <span class="attr">recursive</span>: <span class="literal">true</span> &#125;, (err) =&gt; &#123;</span><br><span class="line">  <span class="comment">// =&gt; [Error: EPERM: operation not permitted, mkdir 'C:\']</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">fs.mkdirSync(<span class="string">'a'</span>)</span><br></pre></td></tr></table></figure>

<p>扩展：可以嵌套创建 a/b/c/d/e/f 目录</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">mkdir</span>(<span class="params">paths, callback</span>) </span>&#123;</span><br><span class="line">    paths = paths.split(<span class="string">'/'</span>);</span><br><span class="line">    <span class="keyword">let</span> index = <span class="number">1</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">next</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (index === paths.length) &#123;</span><br><span class="line">            callback(<span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> tempPath = paths.slice(<span class="number">0</span>, index).join(<span class="string">'/'</span>);</span><br><span class="line">        fs.access(tempPath, (err) =&gt; &#123;</span><br><span class="line">            <span class="keyword">if</span> (err) &#123;</span><br><span class="line">                <span class="comment">// 不存在路径</span></span><br><span class="line">                fs.mkdir(tempPath, (mkErr) =&gt; &#123;</span><br><span class="line">                    <span class="keyword">if</span> (mkErr) &#123;</span><br><span class="line">                        callback(mkErr)</span><br><span class="line">                    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                        index++;</span><br><span class="line">                        next();</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="comment">// 存在路径</span></span><br><span class="line">                index++;</span><br><span class="line">                next();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">    next();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">mkdir(<span class="string">'a/b/d/e/f'</span>, (err) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'创建完成'</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="八：读取目录"><a href="#八：读取目录" class="headerlink" title="八：读取目录"></a>八：读取目录</h2><p>异步：fs.readdir(path[, options], callback)</p>
<p>同步：fs.readdirSync(path[, options])</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fs.readdir(<span class="string">'a'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, files</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// files 是目录中的文件名的数组（不包括 '.' 和 '..'）</span></span><br><span class="line">    <span class="built_in">console</span>.log(dirs);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="九：状态-stat"><a href="#九：状态-stat" class="headerlink" title="九：状态 - stat"></a>九：状态 - stat</h2><p>异步：fs.stat(path[, options], callback)</p>
<p>同步：fs.statSync(path[, options])</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fs.stat(pathsToCheck[i], <span class="function"><span class="keyword">function</span>(<span class="params">err, statsObj</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(statsObj.isDirectory());</span><br><span class="line">    <span class="built_in">console</span>.log(statsObj.ifFile());</span><br><span class="line">    <span class="built_in">console</span>.log(statsObj);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="九：删除目录"><a href="#九：删除目录" class="headerlink" title="九：删除目录"></a>九：删除目录</h2><p>异步：fs.rmdir(path[, options], callback)</p>
<p>同步：fs.rmdirSync(path[, options])</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 只能从叶子节点删除，也就是只能删除空文件夹</span></span><br><span class="line">fs.rmdir(<span class="string">'a'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(err);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>深度删除目录及内容的扩展请看<a href="http://happychong.github.io/2019/10/12/%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%ADjs%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF%EF%BC%88event%20loop%EF%BC%89/">这里</a></p>
<h2 id="十：文件流-stream"><a href="#十：文件流-stream" class="headerlink" title="十：文件流 - stream"></a>十：文件流 - stream</h2><h3 id="1-可读流"><a href="#1-可读流" class="headerlink" title="1.可读流"></a>1.可读流</h3><p>fs.createReadStream(path[, options])</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> rs = fs.createReadStream(<span class="string">'./1.txt'</span>, &#123;</span><br><span class="line">    flags: <span class="string">'r'</span>, <span class="comment">// 当前要做什么操作</span></span><br><span class="line">    encoding: <span class="literal">null</span>, <span class="comment">// 默认 buffer</span></span><br><span class="line">    highWaterMark: <span class="number">64</span>*<span class="number">1024</span>, <span class="comment">// 内部会创建 64K大小的buffer</span></span><br><span class="line">    mode: <span class="number">0o666</span>, <span class="comment">// 打开文件读操作权限</span></span><br><span class="line">    autoClose: <span class="literal">true</span>,</span><br><span class="line">    start: <span class="number">0</span>,</span><br><span class="line">    end: <span class="number">10</span> <span class="comment">// start 到 end ，包前又包后</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">// 默认流的模式是暂停模式，监听data事件后，开始</span></span><br><span class="line"><span class="keyword">let</span> arr = [];</span><br><span class="line">rs.on(<span class="string">'open'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'文件打开触发open事件'</span>);</span><br><span class="line">&#125;);</span><br><span class="line">rs.on(<span class="string">'data'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;</span><br><span class="line">    <span class="comment">// data - 每次读取到的结果</span></span><br><span class="line">    <span class="built_in">console</span>.log(data);</span><br><span class="line">    arr.push(data);</span><br><span class="line">&#125;);</span><br><span class="line">rs.on(<span class="string">'end'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'文件读取完毕'</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(Buffer.concat(arr).toString());</span><br><span class="line">&#125;);</span><br><span class="line">rs.on(<span class="string">'close'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'文件关闭'</span>);</span><br><span class="line">&#125;);</span><br><span class="line">rs.on(<span class="string">'error'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'出错了'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>可读流的原理请看<a href="https://github.com/happychong/2019-zhufeng/blob/master/4.Stream/ReadStream.js" target="_blank" rel="noopener">这里</a></p>
<h3 id="2-可写流"><a href="#2-可写流" class="headerlink" title="2.可写流"></a>2.可写流</h3><p>fs.createWriteStream(path[, options])</p>
<p>因为js是单线程语言，不可能多个操作同时写入一个文件，所以当多个操作同时写入一个文件的时候，会创建一个等待写入的队列（node之前的实现,之后用链表实现的），当这个队列被清空后，会触发drain事件，每次写入(let flag = ws.write())会返回一个Boolean值，代表是否可以继续写入，也就是当前正在写入的值加上等待写入的队列长度是否大于设置的highWaterMark</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 可写流</span></span><br><span class="line"><span class="keyword">const</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">let</span> ws = fs.createWriteStream(path.resolve(__dirname, <span class="string">'copy.md'</span>), &#123;</span><br><span class="line">    highWaterMark: <span class="number">3</span> <span class="comment">// 预计占用的内存空间 默认 16*1024</span></span><br><span class="line">&#125;);</span><br><span class="line">ws.on(<span class="string">'drain'</span>, <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">'drain'</span>);</span><br><span class="line">&#125;)</span><br><span class="line"><span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span>; i &lt; <span class="number">9</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">let</span> flag = ws.write(i + <span class="string">''</span>);</span><br><span class="line">    <span class="built_in">console</span>.log(flag);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可写流的原理请看<a href="https://github.com/happychong/2019-zhufeng/blob/master/4.Stream/WriteSteam.js" target="_blank" rel="noopener">这里</a></p>
<p>可写流写入流程图如下：<br><img src="/images/writeSteam.png" alt="可写流写入流程图"></p>
<h3 id="3-pipe"><a href="#3-pipe" class="headerlink" title="3.pipe"></a>3.pipe</h3><p>rs.pipe(ws);</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> createReadStream = <span class="built_in">require</span>(<span class="string">'./ReadStream'</span>);</span><br><span class="line"><span class="keyword">const</span> createWriteStream = <span class="built_in">require</span>(<span class="string">'./WriteSteam'</span>);</span><br><span class="line"><span class="keyword">let</span> rs = <span class="keyword">new</span> createReadStream(path.resolve(__dirname, <span class="string">'./1.txt'</span>), &#123;</span><br><span class="line">    highWaterMark: <span class="number">4</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="keyword">let</span> ws = <span class="keyword">new</span> createWriteStream(path.resolve(__dirname, <span class="string">'./2.txt'</span>), &#123;</span><br><span class="line">    highWaterMark: <span class="number">1</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">rs.pipe(ws);</span><br><span class="line"><span class="comment">// rs.pipe(ws) = 如下注释代码，具体参考可读流原理的pipe部分</span></span><br><span class="line"><span class="comment">// rs.on('data', function(chunk) &#123;</span></span><br><span class="line"><span class="comment">//     let flag = ws.write(chunk);</span></span><br><span class="line"><span class="comment">//     if (!flag) &#123;</span></span><br><span class="line"><span class="comment">//         rs.pause();</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">// &#125;);</span></span><br><span class="line"><span class="comment">// ws.on('drain', function() &#123;</span></span><br><span class="line"><span class="comment">//     console.log('干了');</span></span><br><span class="line"><span class="comment">//     rs.resume();</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br></pre></td></tr></table></figure>

<h2 id="补充-乱码问题"><a href="#补充-乱码问题" class="headerlink" title="补充 - 乱码问题"></a>补充 - 乱码问题</h2><p>node中，默认是不支持GBK编码格式的，但是可以使用第三方包 iconv-lite来转码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> iconv = <span class="built_in">require</span>(<span class="string">'iconv-lite'</span>);</span><br><span class="line"><span class="comment">// test.md 文件是gbk的编码，想打印出来不乱码，需要使用iconv转码</span></span><br><span class="line"><span class="keyword">let</span> r = fs.readFileSync(path.resolve(__dirname, <span class="string">'test.md'</span>));</span><br><span class="line"><span class="built_in">console</span>.log(iconv.decode(r, <span class="string">'gbk'</span>))</span><br></pre></td></tr></table></figure>

<h2 id="文件系统标志-常用"><a href="#文件系统标志-常用" class="headerlink" title="文件系统标志 - 常用"></a>文件系统标志 - 常用</h2><p>当 flag 选项采用字符串时，可用以下标志：</p>
<ul>
<li>r ： 读取 - 打开文件用于读取。如果文件不存在，则出现异常</li>
<li>r+ ：在读的基础上可以写 - 打开文件用于读取和写入。如果文件不存在，则出现异常</li>
<li>w ：写入 - 打开文件用于写入。如果文件不存在则创建文件，如果文件已存在则截断文件</li>
<li>w+ : 在写的基础上读取 - 打开文件用于读取和写入。如果文件不存在则创建文件，如果文件已存在则截断文件</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://happychong.github.io/2019/11/01/Node中文件的读写模块---FS/" data-id="ck7vkd8b5000ahwplgjic3ucv" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/fs/">fs</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2019/11/07/node深度删除目录及目录里的内容-fs删除扩展/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          Node - 深度（完全）删除目录及目录里的内容 - 扩展
        
      </div>
    </a>
  
  
    <a href="/2019/11/01/JS中，0.1+0.2＞0.3为什么？/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">0.1+0.2 &gt; 0.3 Why???</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">最新文章</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2020/03/17/2018-1-11-hello-world/">Hello World</a>
          </li>
        
          <li>
            <a href="/2019/12/20/webpack优化/">webpack 4.0 + 笔记(优化)</a>
          </li>
        
          <li>
            <a href="/2019/12/16/webpack基础配置/">webpack 4.0+ 笔记(基础配置)</a>
          </li>
        
          <li>
            <a href="/2019/11/19/HTTP基础/">HTTP基础扫盲</a>
          </li>
        
          <li>
            <a href="/2019/11/07/node深度删除目录及目录里的内容-fs删除扩展/">Node - 深度（完全）删除目录及目录里的内容 - 扩展</a>
          </li>
        
          <li>
            <a href="/2019/11/01/Node中文件的读写模块---FS/">Node -文件读写模块--- fs</a>
          </li>
        
          <li>
            <a href="/2019/11/01/JS中，0.1+0.2＞0.3为什么？/">0.1+0.2 &gt; 0.3 Why???</a>
          </li>
        
          <li>
            <a href="/2019/10/30/Node---buffer/">Node --- buffer</a>
          </li>
        
          <li>
            <a href="/2019/10/24/npm命令与配置解析/">npm 命令与配置解析</a>
          </li>
        
          <li>
            <a href="/2019/10/16/Node中的事件循环（event loop）/">Node中的事件轮询（event loop）</a>
          </li>
        
          <li>
            <a href="/2019/10/14/node模块加载原理/">Node模块加载原理</a>
          </li>
        
          <li>
            <a href="/2019/10/14/多线程与单线程服务/">单线程与多线程的基本概念</a>
          </li>
        
          <li>
            <a href="/2019/10/14/node核心模块-简述/">Node核心模块 - 简述</a>
          </li>
        
          <li>
            <a href="/2019/10/12/node基本概念扫盲/">Node基本概念扫盲</a>
          </li>
        
          <li>
            <a href="/2019/10/12/浏览器中js的事件循环（event loop）/">浏览器中javascript的事件循环（event loop）</a>
          </li>
        
          <li>
            <a href="/2019/10/05/vue nextTick原理/">vue nextTick原理</a>
          </li>
        
          <li>
            <a href="/2019/09/05/es6+---类的修饰/">es6+---类的修饰</a>
          </li>
        
          <li>
            <a href="/2019/09/03/es+---class用法笔记 /">es6、7-类的定义</a>
          </li>
        
          <li>
            <a href="/2018/08/08/vue 强制更新试图的方法/">vue 强制更新试图 的方法</a>
          </li>
        
          <li>
            <a href="/2016/05/19/宋晓丹的个人简历/">宋晓丹的个人简历</a>
          </li>
        
          <li>
            <a href="/2016/05/11/windows下，ATOM常用编辑器快捷键/">ATOM常用快捷键</a>
          </li>
        
          <li>
            <a href="/2016/05/05/基本shell命令/">基本SHELL命令使用</a>
          </li>
        
          <li>
            <a href="/2016/05/05/Git命令/">Git常用命令</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">分类</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Node/">Node</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/es6/">es6</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/javascript/">javascript</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/vue/">vue</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/个人/">个人</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/周边/">周边</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/EventLoop/">EventLoop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/HTTP/">HTTP</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Node/">Node</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/buffer/">buffer</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/class/">class</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/core/">core</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/event-loop/">event loop</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/events/">events</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/fs/">fs</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/happyChong/">happyChong</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/javascript/">javascript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/module/">module</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nextTick/">nextTick</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/npm/">npm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/path/">path</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/">shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/util/">util</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vm/">vm</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vue/">vue</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/webpack/">webpack</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/单线程/">单线程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/多线程/">多线程</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">标签云</h3>
    <div class="widget tagcloud">
      <a href="/tags/EventLoop/" style="font-size: 15px;">EventLoop</a> <a href="/tags/HTTP/" style="font-size: 10px;">HTTP</a> <a href="/tags/Node/" style="font-size: 10px;">Node</a> <a href="/tags/buffer/" style="font-size: 10px;">buffer</a> <a href="/tags/class/" style="font-size: 15px;">class</a> <a href="/tags/core/" style="font-size: 10px;">core</a> <a href="/tags/event-loop/" style="font-size: 15px;">event loop</a> <a href="/tags/events/" style="font-size: 10px;">events</a> <a href="/tags/fs/" style="font-size: 20px;">fs</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/happyChong/" style="font-size: 10px;">happyChong</a> <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/javascript/" style="font-size: 10px;">javascript</a> <a href="/tags/module/" style="font-size: 10px;">module</a> <a href="/tags/nextTick/" style="font-size: 10px;">nextTick</a> <a href="/tags/npm/" style="font-size: 10px;">npm</a> <a href="/tags/path/" style="font-size: 10px;">path</a> <a href="/tags/shell/" style="font-size: 10px;">shell</a> <a href="/tags/util/" style="font-size: 10px;">util</a> <a href="/tags/vm/" style="font-size: 10px;">vm</a> <a href="/tags/vue/" style="font-size: 10px;">vue</a> <a href="/tags/webpack/" style="font-size: 15px;">webpack</a> <a href="/tags/单线程/" style="font-size: 10px;">单线程</a> <a href="/tags/多线程/" style="font-size: 10px;">多线程</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">归档</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">三月 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/12/">十二月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">十一月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/10/">十月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/09/">九月 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/08/">八月 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/05/">五月 2016</a></li></ul>
    </div>
  </div>


  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 happyChong<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>



  </div>
</body>
</html>